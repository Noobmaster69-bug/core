"use strict";(self.webpackChunkms_ui=self.webpackChunkms_ui||[]).push([[5139,3449,7862,1357,4717,8641,6992,6875,865,8853,5582],{7862:function(e,n,t){t.r(n),t.d(n,{DownArrow:function(){return i},UpArrow:function(){return o}});var r=t(184),i=(0,r.jsx)("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 1024 1024",height:"1em",width:"1em",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{d:"M840.4 300H183.6c-19.7 0-30.7 20.8-18.5 35l328.4 380.8c9.4 10.9 27.5 10.9 37 0L858.9 335c12.2-14.2 1.2-35-18.5-35z"})}),o=(0,r.jsx)("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 1024 1024",height:"1em",width:"1em",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{d:"M858.9 689L530.5 308.2c-9.4-10.9-27.5-10.9-37 0L165.1 689c-12.2 14.2-1.2 35 18.5 35h656.8c19.7 0 30.7-20.8 18.5-35z"})})},3449:function(e,n,t){t.r(n),t.d(n,{default:function(){return h}});var r=t(4925),i=t(2982),o=t(1413),c=t(885),a=t(1357),u=t(7862),s=t(2791),d=t(8820),l=t(184),f=["isSort"],v=["onDoubleClick"];function h(e){var n=e.emptyBody,t=void 0===n?(0,l.jsx)("div",{style:{height:"50px",width:"100%",display:"flex",justifyContent:"center",alignItems:"center"},children:"Nothing here"}):n,h=e.head,m=e.data,x=void 0===m?[]:m,p=e.classes,b=e.checkbox,j=e.select,y=e.rowPerPage,g=void 0===y?5:y,k=(0,s.useState)(1),w=(0,c.Z)(k,2),S=w[0],_=w[1],C=(0,s.useState)({id:null,state:null}),Z=(0,c.Z)(C,2),N=Z[0],T=Z[1],M=(0,s.useState)([]),O=(0,c.Z)(M,2),A=O[0],R=O[1],I=j||[null,null],P=(0,c.Z)(I,2),D=P[0],B=P[1];function Q(e,n){return e&&e[n]?e[n].default?"".concat(a.default[n]," ").concat(e[n].name):"".concat(e[n].name):"".concat(a.default[n])}return(0,s.useEffect)((function(){x.length&&R(x.map((function(e,n){var t,r,i=(0,o.Z)({},e);return i.index=n,i.checked=void 0!==(null===(t=D[D.findIndex((function(e){return e.index===n}))])||void 0===t?void 0:t.checked)&&(null===(r=D[D.findIndex((function(e){return e.index===n}))])||void 0===r?void 0:r.checked),i})))}),[x,D]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("table",{className:Q(p,"container"),children:(0,l.jsxs)("tbody",{className:Q(p,"body"),children:[(0,l.jsxs)("tr",{className:Q(p,"head")+(h.classes?" "+h.classes:""),children:[b&&(0,l.jsx)("td",{className:a.default.checkbox,children:(0,l.jsx)("input",{type:"checkbox",onClick:function(e){return function(e){var n=A.map((function(n){return n.checked=e.target.checked,(0,o.Z)({},n)}));R(n);var t=n.filter((function(e){return e.checked})).map((function(e){return(0,o.Z)({},e)}));B(t)}(e)}})}),h.map((function(e){var n=e.isSort,t=void 0===n||n,i=(0,r.Z)(e,f);return(0,l.jsxs)("td",{onClick:function(){return function(e,n){n&&((null===N||void 0===N?void 0:N.id)!==e?T({id:e,state:"down"}):T({id:"up"===N.state?null:e,state:null===N.state?"down":"down"===N.state?"up":null}))}(i.id,t)},children:[i.label,(0,l.jsx)("span",{style:{visibility:i.id===N.id?"":"hidden"},children:"down"!==N.state?u.UpArrow:u.DownArrow})]},i.id)}))]}),0===x.length?(0,l.jsx)("tr",{children:(0,l.jsx)("td",{colSpan:h.length+1,children:t})}):function(e,n,t){var r=(0,i.Z)(e);return r?"down"===n.state?t.find((function(e){return e.id===n.id})).numberic?r.sort((function(e,t){return e[n.id].key-t[n.id].key})):r.sort((function(e,t){return e[n.id].key.toLowerCase().charCodeAt()-t[n.id].key.toLowerCase().charCodeAt()})):"up"===n.state?t.find((function(e){return e.id===n.id})).numberic?r.sort((function(e,t){return t[n.id].key-e[n.id].key})):r.sort((function(e,t){return t[n.id].key.toLowerCase().charCodeAt()-e[n.id].key.toLowerCase().charCodeAt()})):r:r}(A,N,h).filter((function(e,n){return Math.abs(n-(2*g*S-g-1)/2)<g/2})).map((function(e,n){e.onDoubleClick;var t=(0,r.Z)(e,v);return(0,l.jsxs)("tr",{className:Q(p,"row")+(t.classes?" "+t.classes:"")+(t.checked?" "+Q(p,"row-selected"):""),onClick:function(e){t.onClick&&t.onClick(e,t)},onDoubleClick:function(e){t.onDoubleClick&&t.onDoubleClick(e,t)},children:[b&&(0,l.jsx)("td",{className:a.default.checkbox,children:(0,l.jsx)("input",{type:"checkbox",checked:t.checked,onClick:function(e){return function(e,n){var t=A.map((function(e){return(0,o.Z)({},e)}));t[t.findIndex((function(e){return e.index===n.index}))].checked=e.target.checked,R(t);var r=t.filter((function(e){return e.checked})).map((function(e){return(0,o.Z)({},e)}));B(r)}(e,t)},onChange:function(){}})}),h.map((function(e){return(0,l.jsx)("td",{colSpan:t[e.id].colSpan||1,children:t[e.id].value},t.id+e.id+""+n)}))]},t.id+""+n)}))]})}),(0,l.jsxs)("div",{className:a.default.toolBox,children:[(0,l.jsxs)("div",{className:a.default.pageSelect,children:[(0,l.jsx)("div",{children:"Page: "}),(0,l.jsx)("select",{onChange:function(e){return _(parseInt(e.target.value))},name:"page",value:S,children:(0,i.Z)(Array(Math.ceil(x.length/g))).map((function(e,n){return(0,l.jsx)("option",{value:n+1,children:n+1},n+"option")}))})]}),(0,l.jsxs)("div",{className:a.default.pageNum,children:["of ",Math.ceil(x.length/g)]}),(0,l.jsxs)("div",{className:a.default.iconHolder,children:[(0,l.jsx)(d.kyg,{size:20,onClick:function(){S<=Math.ceil(x.length/g)&&S>1&&_((function(e){return e-1}))}}),(0,l.jsx)(d.mGl,{size:20,onClick:function(){S<Math.ceil(x.length/g)&&S>=1&&_((function(e){return e+1}))}})]})]})]})}},8641:function(e,n,t){t.r(n),t.d(n,{default:function(){return i}});var r=t(6960);function i(e){return e?function(n){r.Am[e](n,{position:"bottom-center",autoClose:2e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}:function(e){(0,r.Am)(e,{position:"bottom-center",autoClose:2e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}}},5139:function(e,n,t){t.r(n),t.d(n,{useProtcolConfig:function(){return f},useProvision:function(){return l},useServiceInfo:function(){return d},useTask:function(){return v}});var r=t(5861),i=t(7757),o=t.n(i),c=t(4569),a=t.n(c),u=t(1933),s=t(8641);function d(){return(0,u.useQuery)("service-info",(0,r.Z)(o().mark((function e(){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a().get("/microservices").then((function(e){return e.data}));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)}))),{staleTime:6e4})}function l(e){var n=e.onSuccess,t=void 0===n?function(){}:n,r=(0,u.useQueryClient)(),i=(0,s.default)("error");return(0,u.useMutation)((function(e){return a().get("/devices/provision",{params:{id:e}})}),{onSuccess:function(){t(),setTimeout((function(){r.invalidateQueries("devices-info")}),1e3)},onError:function(e,n,t){var r;i(null===(r=e.response)||void 0===r?void 0:r.data)}})}function f(e){return(0,u.useQuery)("protocol?".concat(e),(0,r.Z)(o().mark((function n(){var t;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a().get("/protocol",{params:{id:e}}).then((function(e){return e.data}));case 2:return t=n.sent,n.abrupt("return",t);case 4:case"end":return n.stop()}}),n)}))),{staleTime:6e4})}function v(){return(0,u.useQuery)("task",(0,r.Z)(o().mark((function e(){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a().get("/tasks").then((function(e){return e.data}));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)}))),{staleTime:6e4})}},4717:function(e,n,t){t.r(n),t.d(n,{useDevicesInfo:function(){return f},useModelsInfo:function(){return v},useMutationModel:function(){return h},useProtcolConfig:function(){return d.useProtcolConfig},useProvision:function(){return d.useProvision},useServiceInfo:function(){return d.useServiceInfo},useSocket:function(){return l.useSocket},useTask:function(){return d.useTask},useToast:function(){return m}});var r=t(5861),i=t(7757),o=t.n(i),c=t(1933),a=t(4569),u=t.n(a),s=t(8641),d=t(5139),l=t(6875);function f(){return(0,c.useQuery)("devices-info",(0,r.Z)(o().mark((function e(){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u().get("/devices/info").then((function(e){return e.data}));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)}))),{staleTime:6e4})}function v(){return(0,c.useQuery)("models-info",(0,r.Z)(o().mark((function e(){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u().get("/models/info").then((function(e){return e.data}));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)}))),{staleTime:6e4})}function h(e){var n=e.onSuccess,t=(0,c.useQueryClient)(),r=(0,s.default)("error");return(0,c.useMutation)((function(e){return u().post("/models",e)}),{onSuccess:function(){n(),t.invalidateQueries("models-info")},onError:function(e,n,t){var i;r(null===(i=e.response)||void 0===i?void 0:i.data)}})}function m(e){return(0,s.default)(e)}},6875:function(e,n,t){t.r(n),t.d(n,{useSocket:function(){return c}});var r=t(885),i=t(2791),o=t(6932);function c(e){var n=(0,i.useRef)((0,o.ZP)()),t=(0,i.useState)([]),c=(0,r.Z)(t,2),a=c[0],u=c[1];return(0,i.useEffect)((function(){return console.log(""),n.current.on("connect",(function(){n.current.emit(e,!0),n.current.on(e,(function(e){u(e)}))})),function(){}}),[n,e]),a}},865:function(e,n,t){t.r(n),t.d(n,{default:function(){return l}});var r=t(4942),i=t(1413),o=t(885),c=t(2791),a=t(7467),u=t(8853),s=t(3449),d=t(184);function l(e){var n=e.trigger,t=e.service,r=e.open,i=void 0!==r&&r,s=e.onClose,l=(0,c.useState)(1),v=(0,o.Z)(l,2),h=v[0],m=v[1],x=t.RESTAttributes.find((function(e){return"get"===e.type})),p=t.RESTAttributes.find((function(e){return"set"===e.type})),b=t.ServiceMetaDatas.filter((function(e){return"ProtocolConfig"===e.kind})),j=t.ServiceMetaDatas.filter((function(e){return"ModelChannel"===e.kind}));return(0,d.jsx)(a.Z,{trigger:n,modal:!0,contentStyle:{backgroundColor:"white"},open:i,onClose:s,children:function(e){return(0,d.jsxs)("div",{className:u.default.container,children:[(0,d.jsxs)("div",{className:u.default.navigate,children:[(0,d.jsx)("div",{onClick:function(){m(1)},style:{color:1===h?"var(--navigate-active)":"var(--navigate-inactive)",borderBottom:1===h?"3px solid var(--navigate-active)":"none"},children:"General"}),(0,d.jsx)("div",{onClick:function(){m(2)},style:{color:2===h?"var(--navigate-active)":"var(--navigate-inactive)",borderBottom:2===h?"3px solid var(--navigate-active)":"none"},children:"Protocol Attribute"}),"downService"===t.type&&(0,d.jsx)("div",{onClick:function(){m(3)},style:{color:3===h?"var(--navigate-active)":"var(--navigate-inactive)",borderBottom:3===h?"3px solid var(--navigate-active)":"none"},children:"Channel Attribute"})]}),(0,d.jsxs)("div",{className:u.default.body,children:[1===h&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{className:u.default.bodyRow,children:[(0,d.jsx)("div",{children:"name"})," ",(0,d.jsx)("div",{children:t.name})]}),(0,d.jsxs)("div",{className:u.default.bodyRow,children:[(0,d.jsx)("div",{children:"type"})," ",(0,d.jsx)("div",{children:t.type})]}),(0,d.jsxs)("div",{className:u.default.bodyRow,children:[(0,d.jsx)("div",{children:"path"})," ",(0,d.jsx)("div",{children:t.path})]}),(0,d.jsxs)("div",{className:u.default.bodyRow,children:[(0,d.jsx)("div",{children:"status"}),(0,d.jsx)("div",{children:t.status})]}),(0,d.jsxs)("div",{className:u.default.bodyRow,children:[(0,d.jsx)("div",{children:"startup"}),(0,d.jsx)("div",{children:JSON.stringify(t.runOnStartUp)})]}),x&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("h4",{children:"REST set method"}),(0,d.jsxs)("div",{className:u.default.bodyRow,children:[(0,d.jsx)("div",{children:"method"})," ",(0,d.jsx)("div",{children:x.method})]}),(0,d.jsxs)("div",{className:u.default.bodyRow,children:[(0,d.jsx)("div",{children:"host"}),(0,d.jsx)("div",{children:x.host})]}),(0,d.jsxs)("div",{className:u.default.bodyRow,children:[(0,d.jsx)("div",{children:"path"})," ",(0,d.jsx)("div",{children:x.path})]})]}),p&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("h4",{children:"REST get method"}),(0,d.jsxs)("div",{className:u.default.bodyRow,children:[(0,d.jsx)("div",{children:"method"})," ",(0,d.jsx)("div",{children:p.method})]}),(0,d.jsxs)("div",{className:u.default.bodyRow,children:[(0,d.jsx)("div",{children:"host"})," ",(0,d.jsx)("div",{children:p.host})]}),(0,d.jsxs)("div",{className:u.default.bodyRow,children:[(0,d.jsx)("div",{children:"path"})," ",(0,d.jsx)("div",{children:p.path})]})]})]}),2===h&&(0,d.jsx)(d.Fragment,{children:(0,d.jsx)(f,{data:b})}),3===h&&(0,d.jsxs)("div",{children:[(0,d.jsx)(f,{data:j})," "]})]})]})}})}function f(e){var n=e.data,t=(0,c.useState)([]),a=(0,o.Z)(t,2),l=a[0],f=a[1];var v=n,h=Object.keys(v[0]).filter((function(e){return"kind"!==e&&"MicroserviceID"!==e&&"id"!==e&&"values"!==e})).map((function(e){return{id:e,numberic:(n=v[0][e],"number"===typeof n&&isFinite(n)),label:e,isSort:!1};var n})),m=v.map((function(e){return Object.keys(e).reduce((function(n,t){return(0,i.Z)((0,i.Z)({},n),{},(0,r.Z)({},t,{value:"string"===typeof e[t]?e[t]:JSON.stringify(e[t]),key:e[t]}))}),{})}));return(0,d.jsx)("div",{className:u.default.content,children:(0,d.jsx)(s.default,{head:h,select:[l,f],data:m})})}},7734:function(e,n,t){t.r(n),t.d(n,{default:function(){return d}});var r=t(885),i=t(5582),o=t(3449),c=t(4717),a=t(2791),u=t(865),s=t(184);function d(){var e=(0,c.useServiceInfo)().data,n=void 0===e?[]:e,t=(0,a.useState)([]),d=(0,r.Z)(t,2),l=d[0],f=d[1],v=(0,a.useState)(null),h=(0,r.Z)(v,2),m=h[0],x=h[1],p=(0,a.useState)(!1),b=(0,r.Z)(p,2),j=b[0],y=b[1],g=(0,c.useSocket)("MSPerformance"),k=n.map((function(e){var n,t,r,i;return e.memory=(((null===(n=g.find((function(n){return n.name===e.name})))||void 0===n||null===(t=n.monit)||void 0===t?void 0:t.memory)||0)/1048576).toFixed(2),e.cpu=(null===(r=g.find((function(n){return n.name===e.name})))||void 0===r||null===(i=r.monit)||void 0===i?void 0:i.cpu)||0,{onClick:function(){x(e),y(!0)},name:{value:(0,s.jsx)("div",{children:e.name}),key:e.name},type:{value:(0,s.jsx)("div",{children:e.type}),key:e.type},status:{value:(0,s.jsx)("div",{children:e.status}),key:e.status},memory:{value:(0,s.jsx)("div",{children:e.memory}),key:e.memory},cpu:{value:(0,s.jsx)("div",{children:e.cpu}),key:e.cpu}}}));return(0,s.jsxs)("div",{className:i.default.container,children:[(0,s.jsx)("h1",{children:"Services Management"}),(0,s.jsx)(o.default,{head:[{id:"name",numberic:!1,label:"name"},{id:"type",numberic:!1,label:"type"},{id:"status",numberic:!1,label:"status"},{id:"memory",numberic:!0,label:"memory"},{id:"cpu",numberic:!0,label:"cpu"}],select:[l,f],data:k}),null!==m&&(0,s.jsx)(u.default,{service:m,open:j,onClose:function(){return y(!1)}})]})}},1357:function(e,n,t){t.r(n),n.default={container:"Tables_container__s4wLV",body:"Tables_body__1Xl59",head:"Tables_head__lM+nj",checkbox:"Tables_checkbox__QVIms","row-selected":"Tables_row-selected__tIdJe",row:"Tables_row__Wr3L5",toolBox:"Tables_toolBox__ceO0D",pageSelect:"Tables_pageSelect__48Fvh",pageNum:"Tables_pageNum__ogwMy",iconHolder:"Tables_iconHolder__LYmhA"}},8853:function(e,n,t){t.r(n),n.default={container:"ServiceDetail_container__PlHyR",navigate:"ServiceDetail_navigate__aQY4I",body:"ServiceDetail_body__QLJzs",bodyRow:"ServiceDetail_bodyRow__lDaS8"}},5582:function(e,n,t){t.r(n),n.default={container:"ServicesMGMT_container__U7zOV",buttonHolder:"ServicesMGMT_buttonHolder__nf+1O",createButton:"ServicesMGMT_createButton__mbqYm"}},4925:function(e,n,t){function r(e,n){if(null==e)return{};var t,r,i=function(e,n){if(null==e)return{};var t,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}t.d(n,{Z:function(){return r}})},2982:function(e,n,t){t.d(n,{Z:function(){return o}});var r=t(907);var i=t(181);function o(e){return function(e){if(Array.isArray(e))return(0,r.Z)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||(0,i.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}}}]);
//# sourceMappingURL=5139.a44aadeb.chunk.js.map