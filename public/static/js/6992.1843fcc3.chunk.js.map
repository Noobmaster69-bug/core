{"version":3,"file":"static/js/6992.1843fcc3.chunk.js","mappings":"oKACe,SAASA,EAAMC,GAC5B,OAAIA,EACK,SAACC,GACNC,EAAAA,GAAMF,GAAMC,EAAK,CACfE,SAAU,gBACVC,UAAW,IACXC,iBAAiB,EACjBC,cAAc,EACdC,cAAc,EACdC,WAAW,EACXC,cAAUC,KAIP,SAACT,IACNC,EAAAA,EAAAA,IAAMD,EAAK,CACTE,SAAU,gBACVC,UAAW,IACXC,iBAAiB,EACjBC,cAAc,EACdC,cAAc,EACdC,WAAW,EACXC,cAAUC,O,qWCpBX,SAASC,IACd,OAAOC,EAAAA,EAAAA,UACL,gBADa,iBAEb,oGACqBC,IAAAA,IAAU,kBAAkBC,MAAK,qBAAGC,QADzD,cACQA,EADR,yBAESA,GAFT,2CAIA,CACEC,UAAW,MAIV,SAASC,EAAT,GAAiD,IAAD,IAAxBC,UAAAA,OAAwB,MAAZ,aAAY,EAC/CC,GAAcC,EAAAA,EAAAA,kBACdC,GAAatB,EAAAA,EAAAA,SAAM,SACzB,OAAOuB,EAAAA,EAAAA,cACL,SAACP,GAAD,OACEF,IAAAA,IAAU,oBAAqB,CAC7BU,OAAQ,CACNC,GAAIT,OAGV,CACEG,UAAW,WACTA,IACAC,EAAYM,kBAAkB,iBAEhCC,QAAS,SAACC,EAAOC,EAAWC,GAAa,IAAD,EACtCR,EAAU,UAACM,EAAMG,gBAAP,aAAC,EAAgBf,SAK5B,SAASgB,EAAiBC,GAC/B,OAAOpB,EAAAA,EAAAA,UAAS,YAAD,OACDoB,IADC,iBAEb,wFACMA,EADN,gCAEuBnB,IAAAA,IACZ,YAAa,CAChBU,OAAQ,CACNC,GAAIQ,KAGPlB,MAAK,qBAAGC,QARf,cAEUA,EAFV,yBASWA,GATX,gCAWS,GAXT,2CAaA,CACEC,UAAW,MAIV,SAASiB,IACd,OAAOrB,EAAAA,EAAAA,UACL,QADa,iBAEb,oGACqBC,IAAAA,IAAU,UAAUC,MAAK,qBAAGC,QADjD,cACQA,EADR,yBAESA,GAFT,2CAIA,CACEC,UAAW,MAIV,SAASkB,EAAT,GAAsD,IAAD,IAAxBhB,UAAAA,OAAwB,MAAZ,aAAY,EACpDC,GAAcC,EAAAA,EAAAA,kBACdC,GAAatB,EAAAA,EAAAA,SAAM,SACzB,OAAOuB,EAAAA,EAAAA,cAAY,SAACP,GAAD,OAAUF,IAAAA,KAAW,YAAaE,KAAO,CAC1DG,UAAW,WACTA,IACAC,EAAYM,kBAAkB,iBAEhCC,QAAS,SAACC,EAAOC,EAAWC,GAAa,IAAD,EACtCR,EAAU,UAACM,EAAMG,gBAAP,aAAC,EAAgBf,SAI1B,SAASoB,EAAT,GAAoD,IAAD,IAAxBjB,UAAAA,OAAwB,MAAZ,aAAY,EAClDC,GAAcC,EAAAA,EAAAA,kBACdC,GAAatB,EAAAA,EAAAA,SAAM,SACzB,OAAOuB,EAAAA,EAAAA,cAAY,SAACP,GAAD,OAAUF,IAAAA,KAAW,WAAYE,KAAO,CACzDG,UAAW,WACTA,IACAC,EAAYM,kBAAkB,iBAEhCC,QAAS,SAACC,EAAOC,EAAWC,GAAa,IAAD,EACtCR,EAAU,UAACM,EAAMG,gBAAP,aAAC,EAAgBf,SAI1B,SAASqB,EAAT,GAAkD,IAAD,IAAxBlB,UAAAA,OAAwB,MAAZ,aAAY,EAChDC,GAAcC,EAAAA,EAAAA,kBACdC,GAAatB,EAAAA,EAAAA,SAAM,SACzB,OAAOuB,EAAAA,EAAAA,cAAY,SAACP,GAAD,OAAUF,IAAAA,KAAW,SAAUE,KAAO,CACvDG,UAAW,WACTA,IACAC,EAAYM,kBAAkB,SAEhCC,QAAS,SAACC,EAAOC,EAAWC,GAAa,IAAD,EACtCR,EAAU,UAACM,EAAMG,gBAAP,aAAC,EAAgBf","sources":["hooks/Toast.js","hooks/api.js"],"sourcesContent":["import { toast } from \"react-toastify\";\r\nexport default function Toast(type) {\r\n  if (type) {\r\n    return (msg) => {\r\n      toast[type](msg, {\r\n        position: \"bottom-center\",\r\n        autoClose: 2000,\r\n        hideProgressBar: true,\r\n        closeOnClick: true,\r\n        pauseOnHover: true,\r\n        draggable: true,\r\n        progress: undefined,\r\n      });\r\n    };\r\n  } else {\r\n    return (msg) => {\r\n      toast(msg, {\r\n        position: \"bottom-center\",\r\n        autoClose: 2000,\r\n        hideProgressBar: true,\r\n        closeOnClick: true,\r\n        pauseOnHover: true,\r\n        draggable: true,\r\n        progress: undefined,\r\n      });\r\n    };\r\n  }\r\n}\r\n","import axios from \"axios\";\r\nimport { useMutation, useQuery, useQueryClient } from \"react-query\";\r\nimport Toast from \"./Toast\";\r\nexport function useServiceInfo() {\r\n  return useQuery(\r\n    \"service-info\",\r\n    async () => {\r\n      const data = await axios.get(\"/microservices\").then(({ data }) => data);\r\n      return data;\r\n    },\r\n    {\r\n      staleTime: 60000,\r\n    }\r\n  );\r\n}\r\nexport function useProvision({ onSuccess = () => {} }) {\r\n  const queryClient = useQueryClient();\r\n  const errorToast = Toast(\"error\");\r\n  return useMutation(\r\n    (data) =>\r\n      axios.get(\"/devies/provision\", {\r\n        params: {\r\n          id: data,\r\n        },\r\n      }),\r\n    {\r\n      onSuccess: () => {\r\n        onSuccess();\r\n        queryClient.invalidateQueries(\"devices-info\");\r\n      },\r\n      onError: (error, variables, context) => {\r\n        errorToast(error.response?.data);\r\n      },\r\n    }\r\n  );\r\n}\r\nexport function useProtcolConfig(name) {\r\n  return useQuery(\r\n    `protocol?${name}`,\r\n    async () => {\r\n      if (name) {\r\n        const data = await axios\r\n          .get(\"/protocol\", {\r\n            params: {\r\n              id: name,\r\n            },\r\n          })\r\n          .then(({ data }) => data);\r\n        return data;\r\n      }\r\n      return 0;\r\n    },\r\n    {\r\n      staleTime: 100,\r\n    }\r\n  );\r\n}\r\nexport function useTask() {\r\n  return useQuery(\r\n    \"task\",\r\n    async () => {\r\n      const data = await axios.get(\"/tasks\").then(({ data }) => data);\r\n      return data;\r\n    },\r\n    {\r\n      staleTime: 60000,\r\n    }\r\n  );\r\n}\r\nexport function useMutateProtocol({ onSuccess = () => {} }) {\r\n  const queryClient = useQueryClient();\r\n  const errorToast = Toast(\"error\");\r\n  return useMutation((data) => axios.post(\"/protocol\", data), {\r\n    onSuccess: () => {\r\n      onSuccess();\r\n      queryClient.invalidateQueries(\"service-info\");\r\n    },\r\n    onError: (error, variables, context) => {\r\n      errorToast(error.response?.data);\r\n    },\r\n  });\r\n}\r\nexport function useMutateDevice({ onSuccess = () => {} }) {\r\n  const queryClient = useQueryClient();\r\n  const errorToast = Toast(\"error\");\r\n  return useMutation((data) => axios.post(\"/devices\", data), {\r\n    onSuccess: () => {\r\n      onSuccess();\r\n      queryClient.invalidateQueries(\"devices-info\");\r\n    },\r\n    onError: (error, variables, context) => {\r\n      errorToast(error.response?.data);\r\n    },\r\n  });\r\n}\r\nexport function useMutateTask({ onSuccess = () => {} }) {\r\n  const queryClient = useQueryClient();\r\n  const errorToast = Toast(\"error\");\r\n  return useMutation((data) => axios.post(\"/tasks\", data), {\r\n    onSuccess: () => {\r\n      onSuccess();\r\n      queryClient.invalidateQueries(\"task\");\r\n    },\r\n    onError: (error, variables, context) => {\r\n      errorToast(error.response?.data);\r\n    },\r\n  });\r\n}\r\n"],"names":["Toast","type","msg","toast","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","useServiceInfo","useQuery","axios","then","data","staleTime","useProvision","onSuccess","queryClient","useQueryClient","errorToast","useMutation","params","id","invalidateQueries","onError","error","variables","context","response","useProtcolConfig","name","useTask","useMutateProtocol","useMutateDevice","useMutateTask"],"sourceRoot":""}